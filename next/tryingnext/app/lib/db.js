import { PrismaClient } from '../generated/prisma/client'

//globalThis.prisma means keeping the variable prisma in global. eg window.prisma = 123;


const prisma = globalThis.prisma || new PrismaClient(); //if globalThis.prisma doesnt exist create new PrismaClient
export default prisma

if (process.env.NODE_ENV !== 'production') globalThis.prisma = prisma  // in  not production mode(development mode) 
//globalThis.prisma = prisma variable which is globalThis.prisma.


    //with this line of code hot reloading willnot happen in development phase whenever we change the code.
    //
// first checks whether globalThis.prisma exists if yes prisma variable value is that. if not creates new prisma client.
// exports prisma
// in development mode globalThis.prisma will be the variable prisma(new prisma client or old prisma client which is saved in this variable globalThis.prisma)



//keeping prisma client in global doesnt run the new PrismaClient() code everytime so it prevents hot reloading
//
    //it is imported in places where we need autogenerated prisma client like users, todo , and other models. "prisma.user"
